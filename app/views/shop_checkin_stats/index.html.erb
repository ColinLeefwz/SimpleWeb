<h1>商家每日签到</h1>
<table>
  <tr>
    <th>商家</th>
    <th>截止日期</th>
    <th>用户总数</th>
    <th>ip总数</th>
  </tr>

  <% @checkin_shop_stats.each do |checkin_shop_stat| %>
    <tr>
      <td><%= checkin_shop_stat.shop.name%></td>
      <td><%= 1.days.ago.to_date %></td>
      <td>
        <%= link_to checkin_shop_stat.users.length, "/shop_checkin_stats/show_users?id=#{checkin_shop_stat.id}" %>
      </td>
      <td>
        <%= link_to checkin_shop_stat.ips.length, "/shop_checkin_stats/show_ips?id=#{checkin_shop_stat.id}" %>
      </td>
    </tr>

  <% end %>
</table>





<% if (@length+@pcount-1)/@pcount > 1 %>
  <div id="paginate" style="text-align: center">
    <%= link_to "第1页",{:action => :index, :name => params[:name], :t => params[:t], :lat => params[:lat], :lng => params[:lng],
      :city => params[:city],:page => 1, :pcount => params[:pcount]}, :class => "previous_page"  %>
    <%= link_to "上一页",{:action => :index, :name => params[:name], :t => params[:t], :lat => params[:lat], :lng => params[:lng],
      :city => params[:city],:page => @page.to_i-1, :pcount => params[:pcount]},:class => "previous_page"  if @page != 1 %>

    <em class="current"><%= @page %></em>
    <%= link_to "下一页",{:action => :index, :name => params[:name], :t => params[:t], :lat => params[:lat], :lng => params[:lng],
      :city => params[:city],:page => @page.to_i+1, :pcount => params[:pcount]}, :class => "next_page"  if @page != @last_page %>
    <%= link_to "第#{@last_page}页",{:action => :index, :name => params[:name], :t => params[:t], :lat => params[:lat], :lng => params[:lng],
      :city => params[:city],:page => @last_page, :pcount => params[:pcount]}, :class => "next_page"   %>
  </div>
<%  end %>