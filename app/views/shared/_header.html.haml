
- @categories = Category.all
.navbar.navbar-default.shawd
  .col-md-12
    .navbar-header
      .navbar-left
        #logo_container
          #logo
            = link_to image_tag("logo.png"), root_path, {:title => "Home", :rel => "home"}
    #navbar-collapse2.collapse.navbar-collapse
      = render 'shared/user_session'

  - if @show_category == true
    %ul#subnav.nav.navbar-nav.navbar-header

      %li.dropdown
        %a.navbar-btn.dropdown-toggle{"data-toggle" => "dropdown", :href => "#"}
          %i.fa.fa-list{"data-placement" => "bottom", "data-toggle" => "tooltip", :title => "Menu"}
        %ul.nav.dropdown-menu
          #navbar-collapse2.collapse.navbar-collapse
            %form.navbar-form
              .input-group
                %input.form-control.pull-left{ :placeholder => "Search", :type => "text"}
                  .input-group-btn
                    %button.btn.btn-default.btn-primary{:type => "submit"}
                      %i.fa.fa-search

          - @categories.sort_by{|category| category[:name]}.each do |category|
            %li
              %a.filters{href: "##{category.name}", data: {filter: ".#{category.name.downcase()}"}}
                - category_count = Article.where("'#{category.name}' = ANY(categories)").count + VideoInterview.where("'#{category.name}' = ANY(categories)").count + Announcement.where("'#{category.name}' = ANY(categories)").count
                %span.badge.pull-right
                  = category_count
                = category.name
          %li.divider
          %li.dropdown-submenu
            %a{:href => "#"}
              format
            %ul.dropdown-menu
              %li
                %a.filters{href: "#video", data: {filter: '.videointerview'}} 
                  %span.badge
                    = VideoInterview.count
                  video
                  
              %li
                %a.filters{href: "#article", data: {filter: '.article'}} 
                  %span.badge
                    = Article.count
                  article
              %li
                %a.filters{href: "#announcement", data: {filter: '.announcement'}} 
                  %span.badge
                    = Announcement.count
                  announcement

        %button.navbar-toggle{"data-target" => "#navbar-collapse2", "data-toggle" => "collapse", :type => "button"}
          %span.sr-only Toggle navigation
          %span.icon-bar
          %span.icon-bar
          %span.icon-bar
